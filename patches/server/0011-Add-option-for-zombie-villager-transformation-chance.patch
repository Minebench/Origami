From d3ceb351486805fa4f63b4c8b88a134e4bb4847a Mon Sep 17 00:00:00 2001
From: Phoenix616 <mail@moep.tv>
Date: Tue, 3 Dec 2019 03:12:36 +0100
Subject: [PATCH] Add option for zombie villager transformation chance

This also forces the same chance to apply in both normal and hard mode
---
 src/main/java/de/minebench/origami/OrigamiConfig.java | 4 ++++
 src/main/java/net/minecraft/server/EntityZombie.java  | 2 +-
 2 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/src/main/java/de/minebench/origami/OrigamiConfig.java b/src/main/java/de/minebench/origami/OrigamiConfig.java
index 79d3bb0bb..80c2ed166 100644
--- a/src/main/java/de/minebench/origami/OrigamiConfig.java
+++ b/src/main/java/de/minebench/origami/OrigamiConfig.java
@@ -156,6 +156,10 @@ public final class OrigamiConfig {
         public int getTickRate(String type, String typeName, String entityType, int def) {
             return tickRates.getOrDefault(type + "." + entityType + "." + typeName, tickRates.getOrDefault(type + "." + typeName, def));
         }
+        public double zombieVillagerTransformationChance = 0.5;
+        private void zombieVillagerTransformationChance() {
+            zombieVillagerTransformationChance = getDouble("zombie-villager-transformation-chance", zombieVillagerTransformationChance);
+        }
     }
 
     public static boolean teleportingOfVehiclesWithPassenger = true;
diff --git a/src/main/java/net/minecraft/server/EntityZombie.java b/src/main/java/net/minecraft/server/EntityZombie.java
index 8635d4f40..369cfc627 100644
--- a/src/main/java/net/minecraft/server/EntityZombie.java
+++ b/src/main/java/net/minecraft/server/EntityZombie.java
@@ -456,7 +456,7 @@ public class EntityZombie extends EntityMonster {
     public void b(EntityLiving entityliving) {
         super.b(entityliving);
         if ((this.world.getDifficulty() == EnumDifficulty.NORMAL || this.world.getDifficulty() == EnumDifficulty.HARD) && entityliving instanceof EntityVillager) {
-            if (this.world.getDifficulty() != EnumDifficulty.HARD && this.random.nextBoolean()) {
+            if (this.random.nextDouble() > this.world.origamiConfig.zombieVillagerTransformationChance) { // Origami - configurable Zombie Villager transformation chance
                 return;
             }
 
-- 
2.18.0.windows.1

